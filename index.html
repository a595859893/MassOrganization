<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <!--<meta charset="UTF-8">-->
    <!--全屏显示-->
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
    <!--引用weui框架做样式-->
    <link rel="stylesheet" href="http://res.wx.qq.com/open/libs/weui/1.1.2/weui.min.css">
    <!--引用pure-->
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">

    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">

    <script src="iconfont.js"></script>
    <link rel="stylesheet" href="css.css">
</head>
<body>

<div id="page1" class="page">

    <!--页面一头部幻灯片导航条-->
    <header style="position: relative">
        <div class="slideshow-container">
            <div class="mySlides fade">
                <div class="numbertext">1 / 3</div>
                <img src=" " style="width:100%">
                <!--<div class="text">文本 1</div>-->
            </div>

            <div class="mySlides fade">
                <div class="numbertext">2 / 3</div>
                <img src=" " style="width:100%">
                <!--<div class="text">文本 2</div>-->
            </div>

            <div class="mySlides fade">
                <div class="numbertext">3 / 3</div>
                <img src=" " style="width:100%">
                <!--<div class="text">文本 3</div>-->
            </div>

        </div>

        <div style="text-align:center;position: absolute;
    right: 40%;top:86%" >
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>
    </header>
    <br>

    <div class="weui-tab">
        <div class="weui-tab__panel">

            <!--六个方块导航条-->
            <div class="weui-grids">
                <a href="huodong.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-huodong1-copy-copy-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        校园活动
                    </p>
                </a>
                <a href="stzy.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-tuanduijieshao-copy-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        社团主页
                    </p>
                </a>
                <a href="stzx.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-zhaoxin-"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        社团招新
                    </p>
                </a>
                <a href="排行榜.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-paihangbang-copy-copy-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        排行榜
                    </p>
                </a>
                <a href="#" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-gaoxiao-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        话题圈
                    </p>
                </a>

            </div>


            <!--热门话题-->
            <div class="weui-panel weui-panel_access">
                <div class="weui-panel__hd">精选</div>
                <div class="weui-panel__bd">
                    <a href="" class="weui-media-box weui-media-box_appmsg">
                        <div class="weui-media-box__hd">
                            <img class="weui-media-box__thumb" src="" alt="">
                        </div>
                        <div class="weui-media-box__bd">
                            <h4 class="weui-media-box__title">标题一</h4>
                            <p class="weui-media-box__desc">内容1</p>
                        </div>
                    </a>
                    <a href="" class="weui-media-box weui-media-box_appmsg">
                        <div class="weui-media-box__hd">
                            <img class="weui-media-box__thumb" src="" alt="">
                        </div>
                        <div class="weui-media-box__bd">
                            <h4 class="weui-media-box__title">标题二</h4>
                            <p class="weui-media-box__desc">内容2</p>
                        </div>
                    </a>
                </div>
                <div class="weui-panel__ft">
                    <a href="" class="weui-cell weui-cell_access weui-cell_link">
                        <div class="weui-cell__bd">查看更多</div>
                        <span class="weui-cell__ft"></span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="page2" class="page">
    <br>
    <div class="weui-cells__title">我的消息</div>
    <div class="weui-cells">
        <a class="weui-cell weui-cell_access" href="javascript:;">
            <div class="weui-cell__bd">
                <p>有人回复我 <span class="weui-badge">2</span></p>
            </div>

            <div class="weui-cell__ft"></div>
        </a>
        <a class="weui-cell weui-cell_access" href="javascript:;">
            <div class="weui-cell__bd">
                <p>活动提醒 <span class="weui-badge">new</span></p>
            </div>
            <div class="weui-cell__ft"></div>
        </a>
        <a class="weui-cell weui-cell_access" href="javascript:;">
            <div class="weui-cell__bd">
                <p>社团动态 <span class="weui-badge">3</span></p>
            </div>
            <div class="weui-cell__ft"></div>
        </a>
    </div>


</div>

<!--第三页个人主页-->
<div id="page3" class="page">
    <div id="main">
        <header>
            <a href="" class="weui-media-box weui-media-box_appmsg">
                <div class="weui-media-box__hd">
                    <img class="weui-media-box__thumb" src="" alt="">
                </div>
                <div class="weui-media-box__bd">
                    <h4 class="weui-media-box__title">名字</h4>
                    <p class="weui-media-box__desc">个人简介</p>
                </div>
            </a>
            <button onclick="document.getElementById('id01').style.display='block'" style="width:auto;">社团管理者登陆</button>
        </header>
        <br>
        <!--通过下拉菜单查看-->

        <button class="accordion" style="border-top: 0.01px solid rgba(19,104,50,0.6);"><i class="fa fa-paper-plane-o" style="font-size:18px;color: #136832;"></i> 我的活动</button>
        <div class="panel">
            <a class="weui-cell weui-cell_access" href="javascript:;">
                <div class="weui-cell__bd">
                    <p>活动一</p>
                </div>
                <div class="weui-cell__ft"></div>
            </a>
            <a class="weui-cell weui-cell_access" href="javascript:;">
                <div class="weui-cell__bd">
                    <p>活动二</p>
                </div>
                <div class="weui-cell__ft"></div>
            </a>
        </div>

        <button class="accordion"><i class="fa fa-star" style="font-size:18px;color: #136832;"></i> 我的收藏</button>
        <div class="panel">
            <a class="weui-cell weui-cell_access" href="javascript:;">
                <div class="weui-cell__bd">
                    <p>收藏一</p>
                </div>
                <div class="weui-cell__ft"></div>
            </a>
            <a class="weui-cell weui-cell_access" href="javascript:;">
                <div class="weui-cell__bd">
                    <p>收藏二</p>
                </div>
                <div class="weui-cell__ft"></div>
            </a>
        </div>


        <button class="accordion"><i class="fa fa-black-tie" style="font-size:18px;color: #136832;"></i> 我的社团</button>
        <div class="panel">
            <a class="weui-cell weui-cell_access" href="javascript:;">
                <div class="weui-cell__bd">
                    <p>社团一</p>
                </div>
                <div class="weui-cell__ft"></div>
            </a>
            <a class="weui-cell weui-cell_access" href="javascript:;">
                <div class="weui-cell__bd">
                    <p>社团二</p>
                </div>
                <div class="weui-cell__ft"></div>
            </a>
        </div>

        <button onclick="openNav()"><i class="fa fa-calendar" style="font-size:18px;color: #136832;"></i> 我的日程</button>


    </div>


    <!--侧拉菜单显示日程-->
    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div class="month" id="month">
            <i class="fa fa-calendar-plus-o" style="font-size:25px;color:#fff;position: relative;left: 281px;top: 11px;" onclick='workList()'></i>
            <ul>
                <li style="text-align:center">
                    <span style="font-size:18px" id="thisYear"></span><br>
                    <span id="thisMonth"></span>
                </li>
            </ul>
        </div>

        <div id="table"></div>
        <br>
        <div>
            <ul id="ul">

            </ul>
        </div>

        <div style="display:none" id="add">
            <div class="weui-mask"></div>
            <div class="weui-dialog">
                <div class="weui-dialog__hd"><strong class="weui-dialog__title">添加日程</strong></div>
                <div class="weui-dialog__bd">
                    <span style="display: block">事件：</span>
                    <input type="text"  id="thing" >
                    <ul class="inline">
                        开始时间：<li class="inline laydate-icon" id="start"  onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})"></li>
                        结束时间：<li class="inline laydate-icon" id="end" onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})"></li>
                    </ul>
                </div>
                <div class="weui-dialog__ft">
                    <a  class="weui-dialog__btn weui-dialog__btn_default" onclick="submit(0)">取消</a>
                    <a  class="weui-dialog__btn weui-dialog__btn_primary" onclick="submit(1)">确定</a>
                </div>
            </div>
        </div>

    </div>


    <!--登录页面-->
    <div class="modal" id="id01">
        <form class="modal-content animate" action=" ">
            <div class="container">
                <label><b>账号名</b></label>
                <input type="text" name="uname" id="uname" required>

                <label><b>密码</b></label>
                <input type="password" name="psw" id="psw" required>

                <button type="button" id="login">登陆</button>
                <input type="checkbox" checked="checked" id="remember"> 记住我
            </div>

            <div class="container" style="background-color:#f1f1f1">
                <button type="button" class="cancelbtn" onclick="document.getElementById('id01').style.display='none';">
                    取消
                </button>
            </div>
        </form>
    </div>
</div>

<div id="page4" class="page">
    <div id="main_1">
        <header>
            <a href="" class="weui-media-box weui-media-box_appmsg">
                <div class="weui-media-box__hd">
                    <img class="weui-media-box__thumb" src="" alt="">
                </div>
                <div class="weui-media-box__bd">
                    <h4 class="weui-media-box__title" id="user_name">社团名字</h4>
                    <p class="weui-media-box__desc" id="user_intro">内容</p>
                </div>
            </a>
            <button style="width:auto;background-color: #fff;" onclick="logout()">退出</button>
        </header>

        <br>
        <article class="main">
            <button  style="border-top:0.01px solid rgba(19,104,50,0.6) ;" onclick="document.getElementById('table_1').style.display='block';document.getElementsByClassName('tt').style.display='block';document.getElementById('main_1').style.display='none'"><i class="fa fa-clipboard" style="font-size:18px;color: #136832;"></i> 活动管理</button>

            <button onclick="document.getElementById('id02').style.display='block';document.getElementById('main_1').style.display='none'">
                <i class="fa fa-edit" style="font-size:18px;color: #136832;"></i> 发布活动
            </button>

            <button onclick="document.getElementById('id03').style.display='block';document.getElementById('main_1').style.display='none'">
                <i class="fa fa-edit" style="font-size:18px;color: #136832;"></i> 发布招新
            </button>

            <button class="accordion"><i class="fa fa-address-book-o" style="font-size:18px;color: #136832;"></i> 社团主页管理</button>
            <div class="panel">
                <a class="weui-cell weui-cell_access" href="javascript:;">
                    <div class="weui-cell__bd">
                        <p>编辑社团日志</p>
                    </div>
                    <div class="weui-cell__ft"></div>
                </a>
                <a class="weui-cell weui-cell_access" href="javascript:;">
                    <div class="weui-cell__bd">
                        <p>编辑社团信息</p>
                    </div>
                    <div class="weui-cell__ft"></div>
                </a>
            </div>

        </article>
    </div>


    <!--活动管理-->
    <table class="pure-table pure-table-bordered" id="table_1">
        <thead>
        <tr>
            <th><input type="checkbox" id="all" onclick="all()"></th>
            <th>姓名</th>
            <th>学号</th>
            <th>学院</th>
            <th>手机</th>
            <th>QQ</th>
            <th>备注</th>
        </tr>
        </thead>

        <tbody id="tbody">
        </tbody>

        <div class="tt">
        <div class="weui-cells__title">编辑信息</div>
        <div class="weui-cells weui-cells_form">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <textarea class="weui-textarea" placeholder="请输入文本" rows="3"></textarea>
                    <div class="weui-textarea-counter"><span>0</span>/200</div>
                </div>
            </div>
        </div>

        <div class="weui-btn-area">
            <a class="weui-btn weui-btn_primary" href="javascript:" >确认报名名单并发送信息</a>
            <a class="weui-btn weui-btn_primary" href="javascript:" >返回</a>
        </div>
        </div>
    </table>

    <!--活动发布表单-->
    <div id="id02" class="modal">
        <form class="modal-content animate" id="ACT_form" action=" ">
            <div class="container">
                <label><b>活动类型</b></label>
                <select style="font-size: 12px;" id="ACT_type" required>
                    <option value="讲座">讲座</option>
                    <option value="比赛">比赛</option>
                    <option value="演出">演出</option>
                    <option value="宣讲会">宣讲会</option>
                    <option value="公益时">公益时</option>
                    <option value="体育章">体育章</option>
                    <option value="其它">其它</option>
                </select>

                <label><b>活动名称</b></label>
                <input type="text" placeholder="迎新晚会" id="ACT_name" required>

                <label><b>活动对象</b></label>
                <select style="font-size: 12px;" id="ACT_campus" required>
                    <option value="南校区">南校区</option>
                    <option value="东校区">东校区</option>
                    <option value="北校区">北校区</option>
                    <option value="珠海校区">珠海校区</option>
                    <option value="不限">不限</option>
                </select>

                <label><b>活动地点</b></label>
                <input type="text" placeholder="中珠-风雨球场" id="ACT_location" required>

                <label><b>活动时间</b></label>
                <input  class="laydate-icon" type="text" onClick="laydate({elem: '#ACT_time'});" id="ACT_time" required>

                <label><b>活动简介</b></label>
                <input type="text" id="ACT_intro" id="ACT_intro" required>

                <label><b>推送链接</b></label>
                <input type="url" placeholder="复制推送链接至此处" required>

                <label><b>主办方</b></label>
                <input type="text" placeholder="校团工委" id="ACT_organizer" required>

                <label><b>上传Logo</b></label>
                <img id="ACT_logo" style="width:150px;height:150px"><br>
                <button type="button" onclick="document.getElementById('ACT_input').click();">点击上传图片</button>
                <input type="file" style="display:none" id="ACT_input">
                <br>
                <input type="radio" name="formChoose" value="default" checked="checked"> <b>使用默认报名表</b>
                &nbsp;
                <br>
                <input type="radio" name="formChoose" value="make"
                       onclick="document.getElementById('myDIV').style.display='block';document.getElementById('id02').style.display='none';">
                <b>自定义报名表</b>
                &nbsp;
                <br>
                <input type="radio" name="formChoose" value="none"> <b>不使用报名表</b>
                <br>
                <!--取消和提交按钮-->
                <div class="clearfix">
                    <button type="button"
                            onclick="document.getElementById('id02').style.display='none';document.getElementById('main_1').style.display='block'"
                            class="cancelbtn">取消
                    </button>
                    <button type="submit" class="signupbtn">提交</button>
                </div>
            </div>
        </form>
    </div>


    <!--招新表单-->
    <div id="id03" class="modal">
        <form class="modal-content animate" id="defaultForm">
            <div class="container">
                <label><b>活动类型</b></label>
                <select style="font-size: 12px;" id="NEW_type" required>
                    <option value="shetuan">兴趣社团</option>
                    <option value="zuzhi">学生组织</option>
                </select>

                <label><b>招新标题</b></label>
                <input type="text" id="NEW_title" required>

                <label><b>招新对象</b></label>
                <input type="text" id="NEW_object" required>

                <label><b>报名截止时间</b></label>
                <input  class="laydate-icon" type="text" onClick="laydate({elem: '#NEW_end'});" id="NEW_end" required>
                <!--<input type="text" placeholder="2017.09.25" id="NEW_end" required>-->

                <label><b>社团简介</b></label>
                <input type="text" id="NEW_intro" required>

                <label><b>推送链接</b></label>
                <input type="url" placeholder="复制推送链接至此处" id="NEW_link" required>

                <div class="clearfix">
                    <button type="button"
                            onclick="document.getElementById('id03').style.display='none';document.getElementById('main_1').style.display='block'"
                            class="cancelbtn">取消
                    </button>
                    <button type="submit" class="signupbtn">提交</button>
                </div>
            </div>
        </form>
    </div>


    <!--在线制作报名表-->
    <div id="myDIV">
        <h2 style="margin:5px ">制作报名表</h2>
        <input type="text" id="myInput" placeholder="输入...">
        <button onclick="addElement()" class="addBtn">添加报名需填项</button>

        <form class="modal-content animate" id="customerForm">
            <ul id="myUL">
                <!--JS添加地点-->
            </ul>

            <div class="clearfix">
                <button type="button"
                        onclick="document.getElementById('myDIV').style.display='none';document.getElementById('id02').style.display='block'"
                        class="cancelbtn">取消
                </button>
                <button type="submit" class="signupbtn">提交</button>
            </div>
        </form>
    </div>
</div>


<!--底部选项卡导航条-->
<div class="weui-tabbar" id="footer">
    <a href="#" class="weui-tabbar__item tab" id="defaultOpen" onclick="tabNav(event,'page1')">
        <i class="weui-tabbar__icon fa fa-home" style="font-size:25px;"></i>
        <p class="weui-tabbar__label">首页</p>
    </a>
    <a href="#" class="weui-tabbar__item tab" onclick="tabNav(event,'page2')">
        <i class="weui-tabbar__icon fa fa-bell" style="font-size:22px;"></i>
        <p class="weui-tabbar__label">消息</p>
    </a>
    <a href="#" class="weui-tabbar__item tab" id="myself" onclick="tabNav(event,'page3')">
        <i class="weui-tabbar__icon fa fa-user-secret" style="font-size:25px;"></i>
        <p class="weui-tabbar__label">我</p>
    </a>
</div>
<script type="text/javascript" src="date-picker-js/laydate.js"></script>

<script src="CommonJS.js"></script>
<script>
    //页面初始化
    var uid = -1;
    var listjson = {};
    var defaultjson = {};
    var ne = {
            姓名: "text",
            学号: "number",
            学院: "text",
            手机: "number",
            QQ微信: "text",
            备注: "text"
        }
    ;
    for (var i in ne) {
        newElement(i, ne[i]);
        defaultjson[i] = ne[i];
    }

    var slideIndex = 1;
    showSlides(slideIndex);
    //    第三页下拉菜单
    var acc = document.getElementsByClassName("accordion");
    for (var i = 0; i < acc.length; i++) {
        acc[i].onclick = function () {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            }
        }
    }

    var xmlhttp = GetXMLHTTPRequest();
    xmlhttp.open("GET", "login.php", true);
    xmlhttp.setRequestHeader("CONTENT-TYPE", "application/x-www-form-urlencoded");
    xmlhttp.send("");
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var res = xmlhttp.responseText;
            login(res);
        }
    };

    // 触发 id="defaultOpen" click 事件
    document.getElementById("defaultOpen").click();
    document.getElementById("login").onclick = function () {
        document.getElementById("login").disabled = true;
        var content = {
            type: "login",
            account: document.getElementById("uname").value,
            password: document.getElementById("psw").value,
            remember: document.getElementById("remember").value
        };
        var xmlhttp = GetXMLHTTPRequest();
        xmlhttp.open("POST", "login.php", true);
        xmlhttp.setRequestHeader("CONTENT-TYPE", "application/x-www-form-urlencoded");
        xmlhttp.send(toStr(content));
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var res = xmlhttp.responseText;
                login(res);
            }
        }
    };
    document.getElementById("ACT_form").onsubmit = function (event) {
        event = event || window.event;
        event.target.disabled = true;
        event.preventDefault();
        if (document.getElementsByName("formChoose")[0].checked)
            listjson = defaultjson;
        else if (document.getElementsByName("formChoose")[1].checked) {
            listjson = {};
            var list = document.getElementById("myUL").getElementsByTagName("input");
            for (var i = 0; i < list.length; i++) {
                if (list[i].name)
                    listjson[list.name] = list[i].value;
            }
        } else {
            listjson = {none: true};
        }

        var content = {
            name: document.getElementById("ACT_name").value,
            location: document.getElementById("ACT_location").value,
            time: document.getElementById("ACT_time").value,
            introduction: document.getElementById("ACT_intro").value,
            organizer: document.getElementById("ACT_organizer").value,
            type: document.getElementById("ACT_type").value,
            campus: document.getElementById("ACT_campus").value,
            logo: encodeURIComponent(document.getElementById("ACT_logo").src),
            json: JSON.stringify(listjson),
            UID: uid
        };
        var xmlhttp = GetXMLHTTPRequest();
        xmlhttp.open("POST", "activityPost.php", true);
        xmlhttp.setRequestHeader("CONTENT-TYPE", "application/x-www-form-urlencoded");
        xmlhttp.send(toStr(content));
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var res = xmlhttp.responseText;
                var json = JSON.parse(res);
                console.log(json);
                if (json.success) {
                    document.getElementById('id02').style.display = 'none';
                    document.getElementById('main_1').style.display = 'block'
                } else
                    console.log(json.error);
            }
        }
    };
    document.getElementById("customerForm").onsubmit = function (event) {
        event = event || window.event;
        event.target.disabled = true;
        event.preventDefault();

        listjson = {};
        var list = document.getElementById("myUL").getElementsByTagName("input");
        for (var i = 0; i < list.length; i++) {
            if (list[i].name)
                listjson[list.name] = list[i].value;
        }

        document.getElementById('myDIV').style.display = 'none';
        document.getElementById('id02').style.display = 'block'
    };
    document.getElementById("defaultForm").onsubmit = function (event) {
        event = event || window.event;
        event.target.disabled = true;
        event.preventDefault();

        var content = {
            type: document.getElementById("NEW_type").value,
            title: document.getElementById("NEW_title").value,
            object: document.getElementById("NEW_object").value,
            end: document.getElementById("NEW_end").value,
            introduction: document.getElementById("NEW_intro").value,
            link: document.getElementById("NEW_link").value,
            UID: uid
        };

        var xmlhttp = GetXMLHTTPRequest();
        xmlhttp.open("POST", "recruitmentPost.php", true);
        xmlhttp.setRequestHeader("CONTENT-TYPE", "application/x-www-form-urlencoded");
        xmlhttp.send(toStr(content));
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var res = xmlhttp.responseText;
                var json = JSON.parse(res);
                console.log(json);
                if (json.success) {
                    document.getElementById('id03').style.display = 'none';
                    document.getElementById('main_1').style.display = 'block'
                } else
                    console.log(json.error);
            }
        }
    };
    document.getElementById("ACT_input").onchange = function (event) {
        event = event || window.event;
        var file = event.target.files[0];
        var fr = new FileReader();
        var reg = new RegExp(/image\/\w+/);
        if (reg.test(file.type)) {
            fr.onload = function (event) {
                var url = event.target.result;
                if (url.length <= 1024 * 500)//图片大小限制(dataURL本身的原因，多少不太明确)
                    document.getElementById("ACT_logo").src = event.target.result;
                else
                    alert("图片过大，请选择较小的图片！");
            };
            fr.readAsDataURL(file);
        } else
            alert("不是图片无法上传！");
    };

    //登陆登出
    function login(res) {
        var info = JSON.parse(res);
        if (info.success) {
            uid = info.UID;
            document.getElementById('id01').style.display = 'none';
            document.getElementById("user_name").innerText = info.nickName + "(UID:" + info.UID + ")";
            document.getElementById("user_intro").innerText = info.introduction;
            document.getElementById("footer").style.display = 'none';
            document.getElementById("myself").onclick = function (event) {
                tabNav(event, 'page4')
            };
            document.getElementById("myself").click();
        } else {
            console.log(info.error);
        }

    }

    function logout() {
        var xmlhttp = GetXMLHTTPRequest();
        xmlhttp.open("POST", "login.php", true);
        xmlhttp.setRequestHeader("CONTENT-TYPE", "application/x-www-form-urlencoded");
        xmlhttp.send(toStr({type: "logout"}));
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var res = xmlhttp.responseText;
                var info = JSON.parse(res);
                if (info.success) {
                    uid = -1;
                    document.getElementById("myself").onclick = function (event) {
                        tabNav(event, 'page3')
                    };
                    document.getElementById("footer").style.display = 'flex';
                    document.getElementById("myself").click();
                    document.getElementById("login").disabled = false;
                }
            }
        }
    }

    <!--底部选项卡-->
    function tabNav(evt, tabName) {
        var i, page, tab;
        page = document.getElementsByClassName("page");
        for (i = 0; i < page.length; i++) {
            page[i].style.display = 'none';
        }
        tab = document.getElementsByClassName("tab");
        for (i = 0; i < tab.length; i++) {
            tab[i].className = tab[i].className.replace(" weui-bar__item_on", "");
        }
        document.getElementById(tabName).style.display = "block";
        if (evt) evt.currentTarget.className += " weui-bar__item_on";
    }

    //    第一页顶部幻灯片
    function showSlides() {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {
            slideIndex = 1
        }
        slides[slideIndex - 1].style.display = "block";
        setTimeout(showSlides, 8000);
    }

    //    第三页侧拉菜单--显示日程
    function openNav() {
        document.getElementById("mySidenav").style.width = "100%";
        document.getElementById("main").style.marginLeft = "0%";
//      document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        document.body.style.backgroundColor = "white";
    }

    function addElement() {
        var inputValue = document.getElementById("myInput").value;
        if (inputValue)
            newElement(inputValue);
        else
            alert("你需要写点描述");
    }

    function newElement(value, type) {
        var li = document.createElement("li");
        var label = document.createElement("label");
        var input = document.createElement("input");
        label.innerHTML = "<b>" + value + "&nbsp;</b>";
        li.appendChild(label);
        li.appendChild(input);
        input.name = value;
        input.value = type;
        document.getElementById("myUL").appendChild(li);
        document.getElementById("myInput").value = "";

        var span = document.createElement("SPAN");
        var txt = document.createTextNode("\u00D7");
        span.className = "close";
        span.appendChild(txt);
        li.appendChild(span);

        span.onclick = function () {
            var element = this.parentElement;
            var parent = element.parentElement;
            parent.removeChild(element);
        }
    }

    function showCal(){
        function is_leap(year) {
            return (year%100==0?res=(year%400==0?1:0):res=(year%4==0?1:0));
        } //是否为闰年

        var nstr=new Date(); //当前Date资讯
        var ynow=nstr.getFullYear(); //年份
        var mnow=nstr.getMonth(); //月份
        var dnow=nstr.getDate(); //今日日期
        var n1str=new Date(ynow,mnow,1); //当月第一天Date资讯

        var firstday=n1str.getDay(); //当月第一天星期几

        var m_days= new Array(31,28+is_leap(ynow),31,30,31,30,31,31,30,31,30,31); //各月份的总天数

        var tr_str=Math.ceil((m_days[mnow] + firstday)/7); //表格所需要行数


        //打印表格第一行（有星期标志）
//        var div = document.createElement("div");
        var div = '';
        div +="<table  align='center' width='100%' cellspacing='0' cellpadding='10' ><tr bgcolor= '#ddd' ><th align='center'>日</th><th align='center'>一</th><th align='center'>二</th><th align='center'>三</th><th align='center'>四</th><th align='center'>五</th><th align='center'>六</th></tr>";

        for(i=0;i<tr_str;i++) { //表格的行
            div +="<tr class='day'>";
            for(k=0;k<7;k++) { //表格每行的单元格
                idx=i*7+k; //单元格自然序列号
                date_str=idx-firstday+1; //计算日期
                (date_str<=0 || date_str>m_days[mnow]) ? date_str="&nbsp;" : date_str=idx-firstday+1; //过滤无效日期（小于等于零的、大于月总天数的）
                //打印日期：今天底色为绿
                date_str==dnow ? div +="<td align='center'  bgcolor='#CBCBCB' >" + date_str + "</td>" : div  += "<td align='center' bgcolor='#eee' >" + date_str + "</td>";
            }
            div  +="</tr>"; //表格的行结束
        }

        div  +="</table>"; //表格结束

//        document.getElementById('table').innerHTML =  div  ;

        var y = document.getElementById("thisYear");
        y.innerText= ynow ;

        var m = document.getElementById("thisMonth");
        m.innerText= mnow+1 + '月';

        return div;
    }

    document.getElementById('table').innerHTML = showCal();


    function workList(event){
        document.getElementById('add').style.display = 'block';
        event = event || window.event;
        target = event.target;
    }

    function submit(condition){
        document.getElementById('add').style.display = 'none';
        if(condition){
//            target.innerHTML += "<span style='color:#db9979'> &#8226</span>";
//            target.style.fontWeight = 'bolder';
            var thing = document.getElementById('thing').value;
            var time_1 = document.getElementById('start').innerText;
            var time_2 = document.getElementById('end').innerText;
            var li = document.createElement('li');
            var span = document.createElement('span');
//            span.innerHTML = "<b>"+"\u00D7"+"</b>";
            span.innerHTML ='<i class="fa fa-calendar-minus-o" style="font-size:15px;position:absolute;right: 0;"></i>';
            li.innerHTML = time_1+"&nbsp;~ &nbsp;"+time_2 +"&nbsp;&nbsp;"+"<br>" + thing ;
            var ul = document.getElementById('ul');
            li.appendChild(span);
            ul.appendChild(li);
            span.onclick = function(){
                this.parentElement.style.display='none';
            };
        }
    }
</script>
<script type="text/javascript">
    !function(){
        laydate.skin('molv');//切换皮肤，请查看skins下面皮肤库
        laydate({elem: '#demo'});//绑定元素
    }();

    //日期范围限制
    var start = {
        elem: '#start',
        format: 'YYYY-MM-DD',
        min: laydate.now(), //设定最小日期为当前日期
        max: '2099-06-16', //最大日期
        istime: true,
        istoday: false,
        choose: function(datas){
            end.min = datas; //开始日选好后，重置结束日的最小日期
            end.start = datas;  //将结束日的初始值设定为开始日
        }
    };

    var end = {
        elem: '#end',
        format: 'YYYY-MM-DD',
        min: laydate.now(),
        max: '2099-06-16',
        istime: true,
        istoday: false,
        choose: function(datas){
            start.max = datas; //结束日选好后，充值开始日的最大日期
        }
    };
    laydate(start);
    laydate(end);

    function loadDoc() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                table(this);
            }
        };
        xhttp.open("GET", "table.xml", true);
        xhttp.send();
    }
    function table(xml) {
        var i;
        var xmlDoc = xml.responseXML;
        var table = "<tr><td>"+ "<input type='checkbox'>" + "</td><td>" +
                "</td><td>"+ "</td><td>"+
                "</td><td>"+ "</td><td>"+
                "</td><td>"+ "</td></tr>";
        var x = xmlDoc.getElementsByTagName("form");
        for (i = 0; i <x.length; i++) {
            table += "<tr><td>" +
                    "<input type='checkbox'>" +
                    "</td><td>" +
                    x[i].name +
                    "</td><td>" +
                    x[i].number +
                    "</td><td>" +
                    x[i].institute +
                    "</td><td>" +
                    x[i].telephone +
                    "</td><td>" +
                    x[i].weichat +
                    "</td><td>" +
                    x[i].remarks +
                    "</td></tr>";
        }
        document.getElementById("tbody").appendChild(table);
    }

    function all(){
        var tbody = document.getElementById("tbody");
        var checkBox = tbody.getElementsByTagName("input");
        var all = document.getElementById("all");
        var i = 0 ;
        if(all.checked){
            for(;i < checkBox.length;i++){
                checkBox[i].checked = true;}
        }else {
            for(;i < checkBox.length;i++){
                checkBox[i].checked = false;}
        }
    }

</script>

</body>
</html>