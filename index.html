<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <!--<meta charset="UTF-8">-->
    <!--全屏显示-->
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
    <!--引用weui框架做样式-->
    <link rel="stylesheet" href="http://res.wx.qq.com/open/libs/weui/1.1.2/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">
    <script src="iconfont.js"></script>
    <link rel="stylesheet" href="css.css">
    <style>
        .fa.fa-pencil-square-o {
            float: right;
            font-size: 20px;
        }
    </style>
</head>
<body>

<div id="page1" class="page">

    <!--页面一头部幻灯片导航条-->
    <header style="position: relative">
        <div class="slideshow-container">
            <div class="mySlides fade">
                <div class="numbertext">1 / 3</div>
                <img src=" " style="width:100%">
                <!--<div class="text">文本 1</div>-->
            </div>

            <div class="mySlides fade">
                <div class="numbertext">2 / 3</div>
                <img src=" " style="width:100%">
                <!--<div class="text">文本 2</div>-->
            </div>

            <div class="mySlides fade">
                <div class="numbertext">3 / 3</div>
                <img src=" " style="width:100%">
                <!--<div class="text">文本 3</div>-->
            </div>

        </div>

        <div style="text-align:center;position: absolute;right: 40%;top:86%">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>
    </header>
    <br>

    <div class="weui-tab">
        <div class="weui-tab__panel">

            <!--六个方块导航条-->
            <div class="weui-grids">
                <a href="huodong.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-huodong1-copy-copy-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        校园活动
                    </p>
                </a>
                <a href="stzy.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-tuanduijieshao-copy-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        社团主页
                    </p>
                </a>
                <a href="stzx.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-zhaoxin-"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        社团招新
                    </p>
                </a>
                <a href="billboard.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-paihangbang-copy-copy-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        排行榜
                    </p>
                </a>
                <a href="conversation.html" class="weui-grid">
                    <div class="weui-grid__icon">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-gaoxiao-copy"></use>
                        </svg>
                    </div>
                    <p class="weui-grid__label">
                        话题圈
                    </p>
                </a>

            </div>


            <!--热门话题-->
            <div class="weui-panel weui-panel_access">
                <div class="weui-panel__hd">精选</div>
                <div class="weui-panel__bd">
                    <a href="" class="weui-media-box weui-media-box_appmsg">
                        <div class="weui-media-box__hd">
                            <img class="weui-media-box__thumb" src="" alt="">
                        </div>
                        <div class="weui-media-box__bd">
                            <h4 class="weui-media-box__title">标题一</h4>
                            <p class="weui-media-box__desc">内容1</p>
                        </div>
                    </a>
                    <a href="" class="weui-media-box weui-media-box_appmsg">
                        <div class="weui-media-box__hd">
                            <img class="weui-media-box__thumb" src="" alt="">
                        </div>
                        <div class="weui-media-box__bd">
                            <h4 class="weui-media-box__title">标题二</h4>
                            <p class="weui-media-box__desc">内容2</p>
                        </div>
                    </a>
                </div>
                <div class="weui-panel__ft">
                    <a href="" class="weui-cell weui-cell_access weui-cell_link">
                        <div class="weui-cell__bd">查看更多</div>
                        <span class="weui-cell__ft"></span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="page2" class="page">
    <div class="weui-panel">
        <div class="weui-panel__hd">我的消息</div>
        <div class="weui-panel__bd">
            <div class="weui-media-box weui-media-box_small-appmsg">
                <div class="weui-cells" id="message">
                    <!--js添加-->
                </div>
            </div>
        </div>
    </div>

    <!--js添加dialog-->

</div>

<!--第三页个人主页-->
<div id="page3" class="page">
    <div id="main">
        <header>
            <div class="weui-media-box weui-media-box_appmsg">
                <div class="weui-media-box__hd">
                    <img class="weui-media-box__thumb" style="  border-radius: 50%;" src="" alt="">
                </div>
                <div class="weui-media-box__bd">
                    <h4 class="weui-media-box__title">名字</h4>
                    <button onclick="document.getElementById('id01').style.display='block'" style="width:auto;">
                        社团管理者登陆
                    </button>
                </div>
            </div>
        </header>
        <br>
        <!--通过下拉菜单查看-->

        <button class="accordion" style="border-top: 0.01px solid rgba(19,104,50,0.6);"><i class="fa fa-paper-plane-o"
                                                                                           style="font-size:18px;color: #136832;"></i>我的活动
        </button>
        <div class="panel" id="MyList">
            <!--JS添加点-->
        </div>

        <button class="accordion"><i class="fa fa-star" style="font-size:18px;color: #136832;"></i> 我的收藏</button>
        <div class="panel" id="MyMark">
            <!--JS添加点-->
        </div>


        <button class="accordion"><i class="fa fa-black-tie" style="font-size:18px;color: #136832;"></i> 我的社团</button>
        <div class="panel" id="MyMass">
            <!--JS添加点-->
        </div>

        <button onclick="openNav()"><i class="fa fa-calendar" style="font-size:18px;color: #136832;"></i> 我的日程</button>


    </div>


    <!--侧拉菜单显示日程-->
    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div class="month" id="month">
            <i class="fa fa-calendar-plus-o" style="font-size:25px;color:#fff;position: relative;left: 281px;top: 11px;"
               onclick='workList()'></i>
            <ul>
                <li style="text-align:center">
                    <span style="font-size:18px" id="thisYear"></span><br>
                    <span id="thisMonth"></span>
                </li>
            </ul>
        </div>

        <div id="table"></div>
        <br>
        <div>
            <ul id="ul">
                <!--js添加-->
            </ul>
        </div>

        <div style="display:none" id="add">
            <div class="weui-mask"></div>
            <div class="weui-dialog">
                <div class="weui-dialog__hd"><strong class="weui-dialog__title">添加日程</strong></div>
                <div class="weui-dialog__bd">
                    <span style="display: block">事件：</span>
                    <input type="text" id="thing">
                    <ul class="inline">
                        开始时间：
                        <li class="inline laydate-icon" id="start"
                            onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})"></li>
                        结束时间：
                        <li class="inline laydate-icon" id="end"
                            onClick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})"></li>
                    </ul>
                </div>
                <div class="weui-dialog__ft">
                    <a class="weui-dialog__btn weui-dialog__btn_default" onclick="submit(0)">取消</a>
                    <a class="weui-dialog__btn weui-dialog__btn_primary" onclick="submit(1)">确定</a>
                </div>
            </div>
        </div>

    </div>


    <!--登录页面-->
    <div class="modal" id="id01">
        <form class="modal-content animate" action=" ">
            <div class="container">
                <label><b>账号名</b></label>
                <input type="text" name="uname" id="uname" required>

                <label><b>密码</b></label>
                <input type="password" name="psw" id="psw" required>

                <button type="button" id="login">登陆</button>
                <input type="checkbox" checked="checked" id="remember"> 记住我
            </div>

            <div class="container" style="background-color:#f1f1f1">
                <button type="button" class="cancelbtn" onclick="document.getElementById('id01').style.display='none';">
                    取消
                </button>
            </div>
        </form>
    </div>
</div>

<div id="page4" class="page">
    <div id="main_1">
        <header>
            <a href="" class="weui-media-box weui-media-box_appmsg">
                <div class="weui-media-box__hd">
                    <img class="weui-media-box__thumb" src="" alt="">
                </div>
                <div class="weui-media-box__bd">
                    <h4 class="weui-media-box__title" id="user_name">社团名字</h4>
                    <!--<p class="weui-media-box__desc" id="user_intro">内容</p>-->
                    <button style="width:auto;background-color: #fff;" onclick="logout()">退出</button>
                </div>
            </a>
        </header>

        <br>
        <article class="main">
            <button class="accordion" style="border-top:0.01px solid rgba(19,104,50,0.6) ;"><i class="fa fa-clipboard"
                                                                                               style="font-size:18px;color: #136832;"></i>
                活动管理
            </button>
            <div class="panel" id="MyAct">
                <!--js添加-->
            </div>

            <button onclick="document.getElementById('id02').style.display='block';document.getElementById('main_1').style.display='none'">
                <i class="fa fa-edit" style="font-size:18px;color: #136832;"></i> 发布活动
            </button>

            <button onclick="document.getElementById('id03').style.display='block';document.getElementById('main_1').style.display='none'">
                <i class="fa fa-edit" style="font-size:18px;color: #136832;"></i> 发布招新
            </button>

            <button class="accordion"><i class="fa fa-address-book-o" style="font-size:18px;color: #136832;"></i> 社团主页管理
            </button>
            <div class="panel">
                <a class="weui-cell weui-cell_access"
                   onclick="document.getElementById('dairy').style.display='block';document.getElementById('main_1').style.display='none'">
                    <div class="weui-cell__bd">
                        <p>编辑社团日志</p>
                    </div>
                    <div class="weui-cell__ft"></div>
                </a>
                <a class="weui-cell weui-cell_access"
                   onclick="document.getElementById('id04').style.display='block';document.getElementById('main_1').style.display='none'">
                    <div class="weui-cell__bd">
                        <p>编辑社团信息</p>
                    </div>
                    <div class="weui-cell__ft"></div>
                </a>
            </div>
        </article>
    </div>

    <!--活动管理表格-->
    <div style="display: none;" id="table_main">
        <div id="table_1" style="overflow-x: visible">
            <table id="activityListContainer"></table>
        </div>
        <div class="weui-cells__title">向报名者发送消息</div>
        <div class="weui-cells weui-cells_form">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <textarea class="weui-textarea" placeholder="您已成功报名此活动，请尽快与负责人联系" rows="3"></textarea>
                    <div class="weui-textarea-counter"><span>0</span>/50</div>
                </div>
            </div>
        </div>
        <div class="weui-btn-area">
            <button class="weui-btn weui-btn_plain-primary " style="width: 45%;float: left"
                    onclick="document.getElementById('table_main').style.display='none';document.getElementById('main_1').style.display='block'">
                返回
            </button>
            <button class="weui-btn weui-btn_plain-primary " style="width: 50%;float: right;margin-top: 0">确认并发送
            </button>
        </div>

    </div>

    <!--社团日志-->
    <div id="dairy" class="container" onclick="check()" style="display: none;margin: 30px">
        <b>日志类型</b>
        <form style="margin: 15px 15px 35px ">
            <label for="option-one">
                <input id="option-one" type="radio" name="diaryOption" value="1">
                图文说说
            </label>
            <br>
            <label for="option-two" class="pure-radio">
                <input id="option-two" type="radio" name="diaryOption" value="2">
                推送小记
            </label>
        </form>

        <form id="form_1" style="display: none;margin-bottom:35px ;">
            <label>
                <b>说说你想表达的话~</b>
                <input type="text" id="diary_1_text">
            </label>
            <br>
            <label>
                <b>上传图片</b>
                <button type="button" onclick="document.getElementById('diary_input_1').click();">选择图片</button>
                <input type="file" accept="image/*" id="diary_input_1" style="display: none">
                <img id="diary_img">
            </label>
        </form>

        <form id="form_2" style="display: none;margin-bottom:35px ;">
            <label>
                <b>推送标题</b>
                <input type="text" id="diary_2_text">
            </label>
            <br>
            <label>
                <b>推送图片</b>
                <button type="button" onclick="document.getElementById('diary_input_2').click();">选择图片</button>
                <input type="file" accept="image/*" id="diary_input_2" style="display: none">
                <img id="diary_img2">
            </label>
            <br>
            <label>
                <b>请务必填写正确的推送链接~</b>
                <input type="url" id="diary_url">
            </label>
        </form>

        <button onclick="document.getElementById('dairy').style.display='none';document.getElementById('main_1').style.display='block'"
                class="cancelbtn">返回
        </button>
        <button id="diary_submit">提交</button>
    </div>

    <!--活动发布表单-->
    <div id="id02" class="modal">
        <form class="modal-content animate" id="ACT_form" action=" ">
            <div class="container">
                <label><b>活动类型</b></label>
                <select style="font-size: 12px;" id="ACT_type" required>
                    <option value="讲座">讲座</option>
                    <option value="比赛">比赛</option>
                    <option value="演出">演出</option>
                    <option value="宣讲会">宣讲会</option>
                    <option value="公益时">公益时</option>
                    <option value="体育章">体育章</option>
                    <option value="其它">其它</option>
                </select>

                <label><b>活动名称</b></label>
                <input type="text" placeholder="迎新晚会" id="ACT_name" required>

                <label><b>活动对象</b></label>
                <select style="font-size: 12px;" id="ACT_campus" required>
                    <option value="南校区">南校区</option>
                    <option value="东校区">东校区</option>
                    <option value="北校区">北校区</option>
                    <option value="珠海校区">珠海校区</option>
                    <option value="不限">不限</option>
                </select>

                <label><b>活动地点</b></label>
                <input type="text" placeholder="中珠-风雨球场" id="ACT_location" required>

                <label><b>活动时间</b></label>
                <input class="laydate-icon" type="text" onClick="laydate({elem: '#ACT_time'});" id="ACT_time" required>

                <label><b>活动简介</b></label>
                <input type="text" id="ACT_intro" id="ACT_intro" required>

                <label><b>推送链接</b></label>
                <input type="url" id="ACT_url" placeholder="复制推送链接至此处" required>

                <label><b>主办方</b></label>
                <input type="text" placeholder="校团工委" id="ACT_organizer" required>

                <label><b>上传Logo</b></label>
                <button type="button" onclick="document.getElementById('ACT_input').click();">点击上传图片</button>
                <input type="file" style="display:none" accept="image/*" id="ACT_input">
                <br>
                <img id="ACT_logo" width="70px" height="110px">
                <br>
                <input type="radio" name="formChoose" value="default" checked> <b>使用默认报名表</b>
                <button onclick="document.getElementById('id05').style.display='block';document.getElementById('id02').style.display='none';">
                    点此处预览
                </button>
                &nbsp;
                <br>
                <input type="radio" name="formChoose" value="make"
                       onclick="document.getElementById('myDIV').style.display='block';document.getElementById('id02').style.display='none';">
                <b>自定义报名表~</b>
                <button onclick="document.getElementById('id05').style.display='block';document.getElementById('id02').style.display='none';">
                    点此处预览
                </button>
                &nbsp;
                <br>
                <input type="radio" name="formChoose" value="none"> <b>不使用报名表</b>
                <br>
                <!--取消和提交按钮-->
                <div class="clearfix">
                    <button type="button"
                            onclick="document.getElementById('id02').style.display='none';document.getElementById('main_1').style.display='block'"
                            class="cancelbtn">取消
                    </button>
                    <button type="submit" class="signupbtn">提交</button>
                </div>
            </div>
        </form>
    </div>

    <!--招新表单-->
    <div id="id03" class="modal">
        <form class="modal-content animate" id="NEW_form">
            <div class="container">
                <label><b>活动类型</b></label>
                <select style="font-size: 12px;" id="NEW_type" required>
                    <option value="shetuan">兴趣社团</option>
                    <option value="zuzhi">学生组织</option>
                </select>

                <label><b>招新标题</b></label>
                <input type="text" id="NEW_title" required>

                <label><b>招新对象</b></label>
                <input type="text" id="NEW_object" required>

                <label><b>报名开始时间</b></label>
                <input class="laydate-icon" type="text" onClick="laydate({elem: '#NEW_start'});" id="NEW_start" required>

                <label><b>报名截止时间</b></label>
                <input class="laydate-icon" type="text" onClick="laydate({elem: '#NEW_end'});" id="NEW_end" required>

                <label><b>推送链接</b></label>
                <input type="url" placeholder="复制推送链接至此处" id="NEW_link" required>

                <div class="clearfix">
                    <button type="button"
                            onclick="document.getElementById('id03').style.display='none';document.getElementById('main_1').style.display='block'"
                            class="cancelbtn">取消
                    </button>
                    <button type="submit" class="signupbtn">提交</button>
                </div>
            </div>
        </form>
    </div>

    <!--社团信息编辑-->
    <div id="id04" class="modal">
        <form id="massConfig">
            <div class="weui-cells__title">编辑基本信息</div>
            <div class="weui-cells weui-cells_form">
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label for="MASS_name" class="weui-label">社团名字</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" type="text" id="MASS_name"/>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cells__title">社团类型</div>
                    <div class="weui-cells weui-cells_checkbox" style="border: 0">
                        <label class="weui-cell weui-check__label">
                            <input type="radio" class="weui-check" name="radio1" value="shetuan">
                            <i class="weui-icon-checked"></i>
                            兴趣社团
                        </label>
                        <label class="weui-cell weui-check__label">
                            <input type="radio" name="radio1" class="weui-check" value="zuzhi">
                            <i class="weui-icon-checked"></i>
                            学生组织
                        </label>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label for="MASS_head" class="weui-label">社团负责人</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" type="text" id="MASS_head"/>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label class="weui-label">社团logo</label></div>
                    <div class="weui-cell__bd">
                        <button type="button" onclick="document.getElementById('MASS_logoInput').click();"
                                style="width: 60%">点击上传图片
                        </button>
                        <img id="MASS_logo" style="width:150px;height:150px">
                        <input class="weui-input" type="file" style="display:none" accept="image/*"
                               id="MASS_logoInput"/>
                    </div>
                </div>

                <div class="weui-cell">
                    <div class="weui-cell__hd"><label class="weui-label">社团公众号二维码</label></div>
                    <div class="weui-cell__bd">
                        <button type="button" onclick="document.getElementById('massCfg_input').click();"
                                style="width: 60%">
                            点击上传图片
                        </button>
                        <img id="massCfg_img" style="width:150px;height:150px">
                        <input class="weui-input" type="file" style="display:none" accept="image/*" id="massCfg_input"/>
                    </div>
                </div>

                <div class="weui-cell">
                    <div class="weui-cell__hd"><label class="weui-label">社团简介</label></div>
                    <div class="weui-cell__bd">
                        <textarea class="weui-textarea" placeholder="请输入文本" rows="3" id="MASS_desc"></textarea>
                        <div class="weui-textarea-counter"><span>0</span>/200</div>
                    </div>
                </div>
            </div>
            <!--<label for="weuiAgree" class="weui-agree">-->
                <!--<input id="weuiAgree" type="checkbox" class="weui-agree__checkbox">-->
                <!--<span class="weui-agree__text">阅读并同意<a href="javascript:void(0);">《相关条款》</a></span>-->
            <!--</label>-->
            <div class="weui-btn-area">
                <button type="button"
                        onclick="document.getElementById('id04').style.display='none';document.getElementById('main_1').style.display='block'"
                        class="cancelbtn">取消
                </button>
                <button type="submit" class="signupbtn">提交</button>
            </div>
        </form>
    </div>

    <!--预览报名表-->
    <div id="id05" class="modal">
        <form class="modal-content animate" action=" ">
            <br> <b> &nbsp; 报名表预览 </b> <br>
            <div class="container" id="custom">
                <!--js添加-->
            </div>
            <div class="clearfix">
                <button type="button"
                        onclick="document.getElementById('id05').style.display='none';document.getElementById('id02').style.display='block'"
                        class="cancelbtn">
                    返回
                </button>
            </div>
        </form>
    </div>

    <!--在线制作报名表-->
    <div id="myDIV">
        <h2 style="margin:5px ">制作报名表</h2>
        <input type="text" id="myInput" placeholder="输入...">
        <button onclick="addElement()" class="addBtn">添加报名需填项</button>

        <form class="modal-content animate" id="customerForm">
            <ul id="myUL">
                <!--JS添加地点-->
            </ul>

            <div class="clearfix">
                <button type="button"
                        onclick="document.getElementById('myDIV').style.display='none';document.getElementById('id02').style.display='block'"
                        class="cancelbtn">取消
                </button>
                <button type="submit" class="signupbtn">提交</button>
            </div>
        </form>
    </div>

    <!--dialog活动删除弹窗-->
    <div id="dialog_act" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__hd"><strong class="weui-dialog__title">是否删除？</strong></div>
            <div class="weui-dialog__bd">删除之后无法恢复</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" onclick="dialog_act(0)">取消</a>
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" onclick="dialog_act(1)">确认</a>
            </div>
        </div>
    </div>

</div>


<!--底部选项卡导航条-->
<div class="weui-tabbar" id="footer">
    <a href="#" class="weui-tabbar__item tab" id="defaultOpen" onclick="tabNav(event,'page1')">
        <i class="weui-tabbar__icon fa fa-home" style="font-size:25px;"></i>
        <p class="weui-tabbar__label">首页</p>
    </a>
    <a href="#" class="weui-tabbar__item tab" onclick="tabNav(event,'page2')">
        <i class="weui-tabbar__icon fa fa-bell" style="font-size:22px;"></i>
        <p class="weui-tabbar__label">消息</p>
    </a>
    <a href="#" class="weui-tabbar__item tab" id="myself" onclick="tabNav(event,'page3')">
        <i class="weui-tabbar__icon fa fa-user-secret" style="font-size:25px;"></i>
        <p class="weui-tabbar__label">我</p>
    </a>
</div>
<script type="text/javascript" src="date-picker-js/laydate.js"></script>

<script src="CommonJS.js"></script>
<script>
    //页面初始化
    var uid = -1;
    var listjson = {};
    var defaultjson = {};
    var formStr = "";
    var ne = {
        姓名: "",
        学号: "",
        学院: "",
        手机: "",
        QQ: "",
        备注: ""
    };
    for (var i in ne) {
        newElement(i, ne[i]);
        defaultjson[i] = ne[i];
        formStr += "<label><b>" + i + "</b></label>" + "<input name='" + i.value + "'>";
    }
    document.getElementById("custom").innerHTML = formStr;

    //    下拉菜单
    var acc = document.getElementsByClassName("accordion");
    for (var i = 0; i < acc.length; i++) {
        acc[i].onclick = function () {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            }
        }
    }
    init();


    // 触发 id="defaultOpen" click 事件
    document.getElementById("defaultOpen").click();
    document.getElementById("login").onclick = function () {
        document.getElementById("login").disabled = true;

        var content = {
            serverType: "login",
            account: document.getElementById("uname").value,
            password: document.getElementById("psw").value,
            remember: document.getElementById("remember").value
        };

        postMessage(content, "IndexServer.php", function (json) {
            login(json);
            if (remember) {
                document.cookie = "account_r=" + content.account;
                document.cookie = "password_r=" + content.password;
            }
        });
    };
    document.getElementById("ACT_form").onsubmit = function (event) {
        event = event || window.event;
        event.target.disabled = true;
        event.preventDefault();
        if (document.getElementsByName("formChoose")[0].checked)
            listjson = defaultjson;
        else if (document.getElementsByName("formChoose")[1].checked) {
            listjson = {};
            var list = document.getElementById("myUL").getElementsByTagName("input");
            for (var i = 0; i < list.length; i++) {
                if (list[i].name)
                    listjson[list.name] = list[i].value;
            }
        } else {
            listjson = {none: true};
        }

        postMessage({
            serverType: "acfForm",
            name: document.getElementById("ACT_name").value,
            location: document.getElementById("ACT_location").value,
            time: document.getElementById("ACT_time").value,
            introduction: document.getElementById("ACT_intro").value,
            organizer: document.getElementById("ACT_organizer").value,
            type: document.getElementById("ACT_type").value,
            campus: document.getElementById("ACT_campus").value,
            logo: encodeURIComponent(document.getElementById("ACT_logo").src),
            url: document.getElementById("ACT_url").value,
            json: JSON.stringify(listjson),
            UID: uid
        }, "IndexServer.php", function () {
            document.getElementById('id02').style.display = 'none';
            document.getElementById('main_1').style.display = 'block'
        })
    };
    document.getElementById("NEW_form").onsubmit = function (event) {
        event = event || window.event;
        event.target.disabled = true;
        event.preventDefault();

        postMessage({
            serverType: "recruitment",
            type: document.getElementById("NEW_type").value,
            title: document.getElementById("NEW_title").value,
            object: document.getElementById("NEW_object").value,
            start: document.getElementById("NEW_start").value,
            end: document.getElementById("NEW_end").value,
            introduction: document.getElementById("NEW_intro").value,
            link: document.getElementById("NEW_link").value,
            UID: uid
        }, "IndexServer.php", function () {
            document.getElementById('id03').style.display = 'none';
            document.getElementById('main_1').style.display = 'block'
        });
    };
    document.getElementById("massConfig").onsubmit = function (event) {
        event = event || window.event;
        event.target.disabled = true;
        event.preventDefault();

        var type;
        var radio = document.getElementsByName("formChoose");
        for (var i = 0; i < radio.length; i++)
            if (radio[i].checked)
                type = radio[i].value;

        var content = {
            serverType: "massConfig",
            type: type,
            name: document.getElementById("MASS_name").value,
            head: document.getElementById("MASS_head").value,
            logo: encodeURIComponent(document.getElementById("MASS_logo").src),
            desc: document.getElementById("MASS_desc").value,
            QRcode: document.getElementById("massCfg_img").src,
            UID: uid
        };

        postMessage(content, "IndexServer.php", function (json) {
            document.getElementById('id04').style.display = 'none';
            document.getElementById('main_1').style.display = 'block';
            document.getElementById('main_1').style.display = 'block';
            document.getElementById("user_name").innerText = content.name + "(UID:" + uid + ")";
        });
    };
    document.getElementById("diary_submit").onclick = function (event) {
        event.target.disabled = true;
        var type;
        var radio = document.getElementsByName("diaryOption");
        for (var i = 0; i < radio.length; i++)
            if (radio[i].checked)
                type = radio[i].value;

        if (type == 1) {
            var content = {
                serverType: "massDiary",
                title: "图文说说",
                content: document.getElementById("diary_1_text").value,
                logo: encodeURIComponent(document.getElementById("diary_img").src),
                url: "#",
                UID: uid
            };
        }
        if (type == 2) {
            var content = {
                serverType: "massDiary",
                title: document.getElementById("diary_2_text").value,
                content: "",
                logo: encodeURIComponent(document.getElementById("diary_img2").src),
                url: document.getElementById("diary_url").value,
                UID: uid
            };
        }

        postMessage(content, "IndexServer.php", function (json) {
            event.target.disabled = false;
            document.getElementById('dairy').style.display = 'none';
            document.getElementById('main_1').style.display = 'block'
        });
    }
    document.getElementById("customerForm").onsubmit = function (event) {
        event = event || window.event;
        event.target.disabled = true;
        event.preventDefault();

        listjson = {};
        var list = document.getElementById("myUL").getElementsByTagName("input");
        var formStr = "";
        for (var i = 0; i < list.length; i++) {
            if (list[i].name)
                listjson[list[i].name] = list[i].value;
            formStr += "<label><b>" + list[i].name + "</b></label>" + "<input name='" + list[i].value + "'>";
        }
        document.getElementById("custom").innerHTML = formStr;
        document.getElementById('myDIV').style.display = 'none';
        document.getElementById('id02').style.display = 'block';
    };

    document.getElementById("ACT_input").onchange = function (event) {
        uploadImg(event || window.event, "ACT_logo");
    };
    document.getElementById("MASS_logoInput").onchange = function (event) {
        uploadImg(event || window.event, "MASS_logo");
    };
    document.getElementById("massCfg_input").onchange = function (event) {
        uploadImg(event || window.event, "massCfg_img");
    };
    document.getElementById("diary_input_1").onchange = function (event) {
        event = event || window.event;
        event.preventDefault();
        uploadImg(event, "diary_img");
    };
    document.getElementById("diary_input_2").onchange = function (event) {
        event = event || window.event;
        event.preventDefault();
        uploadImg(event, "diary_img2");
    };

    function uploadImg(event, id) {
        var file = event.target.files[0];
        var fr = new FileReader();
        var reg = new RegExp(/image\/\w+/);
        if (reg.test(file.type)) {
            fr.onload = function (event) {
                var url = event.target.result;
                if (url.length <= 1024 * 100)//图片大小限制(dataURL本身的原因，多少不太明确)
                    document.getElementById(id).src = event.target.result;
                else
                    alert("图片过大，请选择较小的图片！");
            };
            fr.readAsDataURL(file);
        } else
            alert("不是图片无法上传！");
    }

    function init() {
        postMessage({serverType: "autoLogin"}, "IndexServer.php", function (json) {
            login(json);
        });

        postMessage({serverType: "getActivity"}, "IndexServer.php", function (json) {
            for (var i = 0; i < json.list.length; i++) {
                document.getElementById("MyList").appendChild(createActivity(json.list[i].name, json.list[i].introduction, json.list[i].location,
                    json.list[i].holdtime, json.list[i].time, json.list[i].UID, json.list[i].json, json.list[i].logo));
            }
            console.log(json);
            for (var i = 0; i < json.mark.length; i++) {
                document.getElementById("MyMark").appendChild(createActivity(json.mark[i].name, json.mark[i].introduction, json.mark[i].location,
                    json.mark[i].holdtime, json.mark[i].time, json.mark[i].url, json.mark[i].json, json.mark[i].logo));
            }

        });

        var cookie = document.cookie;
        var value = cookie.split("; ");
        for (var i = 0; i < value.length; i++) {
            var arr = value[i].split("=");
            if ("account_r" == arr[0])
                document.getElementById("uname").value = arr[1];
            if ("password_r" == arr[0])
                document.getElementById("psw").value = arr[1];
        }
    }

    //登陆登出
    function login(info) {
        if (info.success) {
            uid = info.UID;
            console.log(info);
            document.getElementById('id01').style.display = 'none';
            document.getElementById("user_name").innerText = info.name + "(UID:" + info.UID + ")";

            document.getElementById("footer").style.display = 'none';
            document.getElementById("myself").onclick = function (event) {
                tabNav(event, 'page4')
            };
            for (var i = 0; i < info.activity.length; i++) {
                document.getElementById("MyAct").appendChild(createAcc(info.activity[i].name, info.activity[i].list,info.activity[i].UID));
            }
            document.getElementById("myself").click();
        } else {
            console.log(info.error);
        }
    }

    function logout() {
        postMessage({serverType: "logout"}, "IndexServer.php", function () {
            uid = -1;
            document.getElementById("myself").onclick = function (event) {
                tabNav(event, 'page3')
            };
            document.getElementById("footer").style.display = 'flex';
            document.getElementById("myself").click();
            document.getElementById("login").disabled = false;
        });
    }

    <!--底部选项卡-->
    function tabNav(evt, tabName) {
        var i, page, tab;
        page = document.getElementsByClassName("page");
        for (i = 0; i < page.length; i++) {
            page[i].style.display = 'none';
        }
        tab = document.getElementsByClassName("tab");
        for (i = 0; i < tab.length; i++) {
            tab[i].className = tab[i].className.replace(" weui-bar__item_on", "");
        }
        document.getElementById(tabName).style.display = "block";
        if (evt) evt.currentTarget.className += " weui-bar__item_on";
    }

    //    第一页顶部幻灯片
    var slideIndex = 1;
    showSlides(slideIndex);

    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        if (slideIndex > slides.length) {
            slideIndex = 1
        }
        slides[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].className += " active";
        setTimeout(showSlides, 8000);
        slideIndex++;
    }

    //    第三页侧拉菜单--显示日程
    function openNav() {
        document.getElementById("mySidenav").style.width = "100%";
        document.getElementById("main").style.marginLeft = "0%";
//      document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        document.body.style.backgroundColor = "white";
    }

    function addElement() {
        var inputValue = document.getElementById("myInput").value;
        if (inputValue)
            newElement(inputValue);
        else
            alert("你需要写点描述");
    }

    function newElement(value) {
        var li = document.createElement("li");
        var label = document.createElement("label");
        var input = document.createElement("input");
        label.innerHTML = "<b>" + value + "&nbsp;</b>";
        li.appendChild(label);
        li.appendChild(input);
        input.name = value;
        document.getElementById("myUL").appendChild(li);
        document.getElementById("myInput").value = "";

        var span = document.createElement("SPAN");
        var txt = document.createTextNode("\u00D7");
        span.className = "close";
        span.appendChild(txt);
        li.appendChild(span);

        span.onclick = function () {
            var element = this.parentElement;
            var parent = element.parentElement;
            parent.removeChild(element);
        }
    }

    function createActivity(title, content, place, holdtime, time, url, labels, logo) {
        var a = document.createElement("a");
        var div_1 = document.createElement("div");
        var img = document.createElement("img");

        var div_2 = document.createElement("div");
        var h4 = document.createElement("h4");

        var p_1 = document.createElement("p");
        var p_2 = document.createElement("p");
        var p_3 = document.createElement("p");
        var p_4 = document.createElement("p");

        var formStr = "";
        var formLabel = JSON.parse(labels);
        for (var i in formLabel) {
            formStr += "<label><b>" + i + "</b></label>" + "<input name='" + i + "'>";
        }

        img.src = decodeURIComponent(logo);

        img.style.width = "50px";
        img.style.height = "50px";

        a.className = "weui-media-box weui-media-box_appmsg";
        a.href = url;

        div_1.className = "weui-media-box__hd";
        div_2.className = "weui-media-box__bd";

        h4.className = "weui-media-box__title";
        h4.innerText = title + "  ";

        p_1.className = p_2.className = p_3.className = p_4.className = "weui-media-box__desc";
        p_1.innerText = "时间" + "" + ":" + holdtime;
        p_2.innerText = "地点" + "" + ":" + place;
        p_3.innerText = "主办方" + "" + ":" + time;
        p_4.innerText = "简介" + "" + ":" + content;

        div_1.appendChild(img);

        div_2.appendChild(h4);
        div_2.appendChild(p_1);
        div_2.appendChild(p_2);
        div_2.appendChild(p_3);
        div_2.appendChild(p_4);

        a.appendChild(div_1);
        a.appendChild(div_2);

        return a;
    }

    //消息的dom,并没有测试所以有问题再和我说吧~
    function getMessage() {
        postMessage({serverType: " "}, " ", function (json) {
            dealContent(json);
        });
    }

    function dealContent(json) {
        if (json.success) {
            var message = document.getElementById("message");
            var page_2 = document.getElementById('page2');
            for (var i = 0; i < json.activity.length; i++) {
                message.appendChild(createMessage(act, json[i].title, ''));
                page_2.appendChild(dialog(i, json[i].message, ''));
            }
            for (var i = 0; i < json.mass.length; i++) {
                message.appendChild(createMessage(mass, json[i].title, json[i].url));
            }
            for (var i = 0; i < json.worklist.length; i++) {
                message.appendChild(createMessage(work, json[i].title, json[i].time));
                page_2.appendChild(dialog(i, json[i].time, json[i].title));
            }
        } else {
            console.log(json.error);
        }
    }

    function createMessage(type, title, content) {
        var a = document.createElement("a");
        var div_1 = document.createElement("div");
        var div_2 = document.createElement("div");
        var span = document.createElement("span");
        var p = document.createElement("p");

        a.className = "weui-cell weui-cell_access";
        div_1.className = "weui-cell__hd";
        div_2.className = "weui-cell__bd weui-cell_primary";
        span.className = "weui-cell__ft";

        if (type == act) {
            div_1.innerHTML = "<i class='fa fa-language' style='font-size:20px;color: #136832'></i>";
            p.innerText = '&nbsp;' + title + '报名成功';
            a.onclick = function () {
                document.getElementById("date_" + index).style.display = 'block';
            }
        }
        if (type == mass) {
            div_1.innerHTML = "<i class='fa fa-joomla' style='font-size:20px;color: #136832'></i>";
            p.innerText = '&nbsp;' + title + '有新动态啦';
            a.href = content;
        }
        if (type == work) {
            div_1.innerHTML = "<i class='fa fa-clipboard' style='font-size:20px;color: #136832'></i>";
            p.innerText = '&nbsp;' + title + '有新动态啦';
            a.onclick = function () {
                document.getElementById("work_" + index).style.display = 'block';
            }
        }

        div_2.appendChild(p);
        a.appendChild(div_1);
        a.appendChild(div_2);
        a.appendChild(span);

        return a;
    }

    function dialog(index, content, title) {
        var div_3 = document.createElement("div");
        var div_3_1 = document.createElement("div");
        var div_3_2 = document.createElement("div");
        var div_3_2_1 = document.createElement("div");
        var div_3_2_2 = document.createElement("div");
        var div_3_2_3 = document.createElement("div");
        var a_1 = document.createElement("a");

        div_3_1.className = "weui-mask";
        if (title = '') {
            div_3.id = "date_" + index;
        } else {
            div_3.id = "work_" + index
        }

        div_3_2.className = "weui-dialog";
        div_3_2_1.className = "weui-dialog__hd";
        div_3_2_2.className = "weui-dialog__bd";
        div_3_2_3.className = "weui-dialog__ft";
        a_1.className = "eui-dialog__btn weui-dialog__btn_primary";

        div_3.style = 'display: none';
        div_3_2_1.innerHTML = '<strong class="weui-dialog__title">' + title + '</strong>';
        div_3_2_2.innerText = content;
        a_1.onclick = function () {
            this.parentElement.style.display = 'none'
        };
        a_1.innerText = '确定';

        div_3_2_3.appendChild(a_1);
        div_3_2.appendChild(div_3_2_1);
        div_3_2.appendChild(div_3_2_2);
        div_3_2.appendChild(div_3_2_3);

        div_3.appendChild(div_3_1);
        div_3.appendChild(div_3_2);
        return div_3;
    }

    function showCal() {
        function is_leap(year) {
            return (year % 100 == 0 ? res = (year % 400 == 0 ? 1 : 0) : res = (year % 4 == 0 ? 1 : 0));
        } //是否为闰年

        var nstr = new Date(); //当前Date资讯
        var ynow = nstr.getFullYear(); //年份
        var mnow = nstr.getMonth(); //月份
        var dnow = nstr.getDate(); //今日日期
        var n1str = new Date(ynow, mnow, 1); //当月第一天Date资讯

        var firstday = n1str.getDay(); //当月第一天星期几

        var m_days = new Array(31, 28 + is_leap(ynow), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31); //各月份的总天数

        var tr_str = Math.ceil((m_days[mnow] + firstday) / 7); //表格所需要行数


        //打印表格第一行（有星期标志）
//        var div = document.createElement("div");
        var div = '';
        div += "<table  align='center' width='100%' cellspacing='0' cellpadding='10' ><tr bgcolor= '#ddd' ><th align='center'>日</th><th align='center'>一</th><th align='center'>二</th><th align='center'>三</th><th align='center'>四</th><th align='center'>五</th><th align='center'>六</th></tr>";

        for (i = 0; i < tr_str; i++) { //表格的行
            div += "<tr class='day'>";
            for (k = 0; k < 7; k++) { //表格每行的单元格
                idx = i * 7 + k; //单元格自然序列号
                date_str = idx - firstday + 1; //计算日期
                (date_str <= 0 || date_str > m_days[mnow]) ? date_str = "&nbsp;" : date_str = idx - firstday + 1; //过滤无效日期（小于等于零的、大于月总天数的）
                //打印日期：今天底色为绿
                date_str == dnow ? div += "<td align='center'  bgcolor='#CBCBCB' >" + date_str + "</td>" : div += "<td align='center' bgcolor='#eee' >" + date_str + "</td>";
            }
            div += "</tr>"; //表格的行结束
        }

        div += "</table>"; //表格结束

//        document.getElementById('table').innerHTML =  div  ;

        var y = document.getElementById("thisYear");
        y.innerText = ynow;

        var m = document.getElementById("thisMonth");
        m.innerText = mnow + 1 + '月';

        return div;
    }

    document.getElementById('table').innerHTML = showCal();

    function workList() {
        document.getElementById('add').style.display = 'block';
    }

    function submit(condition) {
        document.getElementById('add').style.display = 'none';
        var time_1 = document.getElementById('start').innerText;
        var time = document.getElementById('start').value;
        var time_2 = document.getElementById('end').innerText;
        if (time_1 < time_2) {
            if (condition) {
                var thing = document.getElementById('thing').value;
                console.log(time_1);
                console.log(time);
                postMessage({
                    serverType: "addDate",
                    actName: thing,
                    actStart: time_1,
                    actEnd: time_2
                }, "IndexServer.php", function () {
                    var li = document.createElement('li');
                    var span = document.createElement('span');
                    span.innerHTML = '<i class="fa fa-calendar-minus-o" style="font-size:15px;position:absolute;right: 0;"></i>';
                    li.innerHTML = time_1 + "&nbsp;~ &nbsp;" + time_2 + "&nbsp;&nbsp;" + "<br>" + thing;
                    var ul = document.getElementById('ul');
                    li.appendChild(span);
                    ul.appendChild(li);
                    span.onclick = function () {
                        this.parentElement.style.display = 'none';
                    };
                });
            }
        }
        if (time_1 > time_2) {
            alert('请正确输入时间');
        }
    }

    function createAcc(title, obj,uid) {
        var a = document.createElement("a");
        var div_1 = document.createElement("div");
        var p = document.createElement("p");
        var span = document.createElement("span");
        var t = '';
        var th = '';
        for (var i = 0; i < obj.length; i++) {
            var json = JSON.parse(obj[i].json);
            t += "<tr>";
            for (var j in json) {
                t += "<td>" + json[j] + "</td>";
                if (i == 0)
                    th += "<th>" + j + "</th>";
            }
            t += "</tr>";
        }

        a.className = 'weui-cell weui-cell_access';
        div_1.className = 'weui-cell__bd';
        span.className = 'fa fa-trash';
        span.style.float = 'right';

        p.innerText = title;

        div_1.appendChild(p);
        a.appendChild(div_1);
        a.appendChild(span);



        span.onclick = function (event){
            document.getElementById('dialog_act').style.display='block';
            event = event || window.event;
            event.preventDefault();
             element = this.parentElement;
             parent = element.parentElement;
        };
        
        div_1.onclick=function () {
                document.getElementById('table_main').style.display = 'block';
                document.getElementById('main_1').style.display = 'none';
                document.getElementById('activityListContainer').innerHTML = "<tr>" + th + "</tr>" + t;
        };

        return a;
    }

    function dialog_act(value){
        document.getElementById('dialog_act').style.display='none';
        if(value){
            postMessage({
                serverType: "destroyAct",
                actUID:uid
            }, "IndexServer.php", function (){
                parent.removeChild(element);
                alert('成功删除');
            })
        }
    }
    function all() {
        var tbody = document.getElementById("tbody");
        var checkBox = tbody.getElementsByTagName("input");
        var all = document.getElementById("all");
        if (all.checked) {
            for (var i = 0; i < checkBox.length; i++) {
                checkBox[i].checked = true;
            }
        } else {
            for (var i = 0; i < checkBox.length; i++) {
                checkBox[i].checked = false;
            }
        }
    }

    function check() {
        if (document.getElementById('option-one').checked) {
            document.getElementById('form_1').style.display = 'block';
            document.getElementById('form_2').style.display = 'none';
        }
        if (document.getElementById('option-two').checked) {
            document.getElementById('form_2').style.display = 'block';
            document.getElementById('form_1').style.display = 'none';
        }
    }
</script>
<script type="text/javascript">
    !function () {
        laydate.skin('molv');//切换皮肤，请查看skins下面皮肤库
        laydate({elem: '#demo'});//绑定元素
    }();

    //日期范围限制
    var start = {
        elem: '#start',
        format: 'YYYY-MM-DD',
        min: laydate.now(), //设定最小日期为当前日期
        max: '2099-06-16', //最大日期
        istime: true,
        istoday: false,
        choose: function (datas) {
            end.min = datas; //开始日选好后，重置结束日的最小日期
            end.start = datas;  //将结束日的初始值设定为开始日
        }
    };

    var end = {
        elem: '#end',
        format: 'YYYY-MM-DD',
        min: laydate.now(),
        max: '2099-06-16',
        istime: true,
        istoday: false,
        choose: function (datas) {
            start.max = datas; //结束日选好后，充值开始日的最大日期
        }
    };
    laydate(start);
    laydate(end);

</script>

</body>
</html>